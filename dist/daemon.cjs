'use strict';var chunkRDE2YGL7_cjs=require('./chunk-RDE2YGL7.cjs'),chunkLM53EFPZ_cjs=require('./chunk-LM53EFPZ.cjs'),e=require('fs'),m=require('os'),p=require('path');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var e__default=/*#__PURE__*/_interopDefault(e);var m__default=/*#__PURE__*/_interopDefault(m);var p__default=/*#__PURE__*/_interopDefault(p);/* ZuzJS Process Manager */
var i=p__default.default.join(m__default.default.tmpdir(),"zuzjs-pm.pid");function d(){e__default.default.writeFileSync(i,String(process.pid));}function u(){e__default.default.existsSync(i)&&e__default.default.unlinkSync(i);}var f=p__default.default.join(m__default.default.tmpdir(),"zuzjs-pm.snapshot.json");function l(o){try{let r=o.list();e__default.default.writeFileSync(f,JSON.stringify(r,null,2));}catch{}}async function S(){chunkLM53EFPZ_cjs.c.success("daemon",`Booting ZPM daemon (PID ${process.pid})`),d();let o=new chunkRDE2YGL7_cjs.d,r=chunkLM53EFPZ_cjs.e(o);async function t(s){chunkLM53EFPZ_cjs.c.info("daemon",`Received ${s} \u2013 shutting down\u2026`),l(o),r.close(),await o.stopAll(),u(),process.exit(0);}process.on("SIGINT",()=>t("SIGINT")),process.on("SIGTERM",()=>t("SIGTERM")),process.on("uncaughtException",s=>chunkLM53EFPZ_cjs.c.error("daemon","Uncaught exception:",s)),process.on("unhandledRejection",s=>chunkLM53EFPZ_cjs.c.error("daemon","Unhandled rejection:",s)),chunkLM53EFPZ_cjs.c.success("daemon","Ready \u2013 waiting for IPC commands.");}S().catch(o=>{chunkLM53EFPZ_cjs.c.error("daemon","Fatal startup error:",o),process.exit(1);});